<!-- /Global/nav.html -->
<nav class="navbar navbar-expand-lg nav-blur sticky-top">
  <div class="container py-2">
    <a class="navbar-brand d-flex align-items-center gap-2" href="../index.php">
      <span class="brand-mark"><i class="bi bi-dice-5"></i></span>
      <span class="fw-semibold">Daggerheart Tool</span>
    </a>

    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#nav"
            aria-controls="nav" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="nav">
      <ul class="navbar-nav ms-auto align-items-lg-center gap-lg-2">

        <!-- Index Sections -->
        <li class="nav-item">
          <a class="nav-link" href="../index.php#features">Features</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../index.php#how">How it works</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../index.php#faq">FAQ</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/Dashboard/index.php">Dashboard</a>
        </li>

        <!-- Auth -->
        <li class="nav-item ms-lg-2">
          <a class="btn btn-ghost btn-sm" href="../Login/login.php">
            <i class="bi bi-box-arrow-in-right me-1"></i> Sign in
          </a>
        </li>

        <li class="nav-item ms-lg-2">
          <a class="btn btn-brand btn-sm" href="../Login/signup.php">
            <i class="bi bi-stars me-1"></i> Get started
          </a>
        </li>

        <!-- Theme Toggle -->
        <li class="nav-item ms-lg-2">
          <button id="themeToggle" class="btn btn-sm btn-outline-secondary" type="button" aria-label="Toggle theme">
            <i class="bi bi-moon-stars me-1"></i> Dark
          </button>
        </li>

      </ul>
    </div>
  </div>
</nav>

<script>
/**
 * Force favicon from nav.html (works even if nav is included inside <body>).
 * It injects/updates <link rel="icon"> in document.head.
 */
(function ensureFavicon() {
  const faviconPath = "/favicon.ico";
  const cacheBuster = "v=2"; // bump this if you change the icon
  const href = faviconPath + "?" + cacheBuster;

  function upsertLink(rel, type, sizes) {
    const sel = `link[rel="${rel}"]` + (sizes ? `[sizes="${sizes}"]` : "");
    let link = document.head.querySelector(sel);
    if (!link) {
      link = document.createElement("link");
      link.rel = rel;
      if (type) link.type = type;
      if (sizes) link.sizes = sizes;
      document.head.appendChild(link);
    }
    link.href = href;
    return link;
  }

  // Ensure head exists (it always should, but just in case)
  if (!document.head) return;

  // Common variants
  upsertLink("icon", "image/png", "32x32");
  upsertLink("icon", "image/png", "16x16");
  upsertLink("icon", "image/png", null);
  upsertLink("shortcut icon", null, null);
  upsertLink("apple-touch-icon", null, null);

  // (Optional) some browsers request /favicon.ico by default.
  // If you want, also place a real /favicon.ico at project root.
})();
</script>